<%- include('partials/header') %>
<%- include('partials/navbar', {user, active: "acessos"}) %>

<div class="container col-md-5 my-5">
    <div class="card">
      <div class="card-body">
  
        <form action="/novoUsuario" method="POST" autocomplete="off">
        <div class="form-group mb-3">
          <label class="form-label" for="novoLogin">Login</label>
          <input type="text" class="form-control" id="novoLogin" name="novoLogin" placeholder="Ex: nome.sobrenome" maxlength="45" required>
        </div>
        <div class="form-group mb-4">
          <label class="form-label" for="novaSenha">Senha</label>
          <input type="password" class="form-control" id="novaSenha" name="novaSenha" required>
        </div>
        <div class="form-group">
          <button type="submit" class="btn btn-dark w-100">Cadastrar Usuário</button>
        </div>
        </form> 
  
      </div>
    </div>
  </div>

  <% if (locals.mensagem) { %>
    <p><%=mensagem%></p>
  <% } %>
  
    <% if(usuarios.length > 0) {%>
  
      <div class="container col-md-6">
  
        <table class="table table-bordered rounded">
          <thead>
            <tr>
              <th>ID</th>
              <th>login</th>
              <th>Permissão</th>
            </tr>
          </thead>
          <tbody>
    
            <%usuarios.forEach(usuario => {%>
              <tr class="align-middle">
                <td><%=usuario.id%></td>
                <td><%=usuario.username%></td>
                <td class="d-flex justify-content-between"> <span class="align-self-center"></span> 
                
                  <form action="/removerUsuario/<%= usuario.id %>" method="POST">
                    <div class="form-group">
                      <button type="submit" class="btn btn-outline-danger"><i class="fa-solid fa-trash-can"></i></button>
                    </div>
                  </form>
                </td>
              </tr>
            <%});%>
    
          </tbody>   
        </table>
  
      </div>
  
    <%}%>
  </div>
      

<%- include('partials/footer') %>